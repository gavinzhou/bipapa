<html>
<head>
<meta http-equiv="Content-Type" content="image/jpeg; charset=utf-8" />
<title>template function test</title>
<script type="text/javascript" src="{{ static_url("js/jquery-1.8.0.min.js")}}"></script>
<script type="text/javascript" src="{{ static_url("js/jquery.masonry.min.js")}}"></script>
<script type="text/javascript" src="{{ static_url("js/jquery.infinitescroll.min.js")}}"></script>
<script type="text/javascript" src="{{ static_url("js/scrollpagination.js")}}"></script>
<script type="text/javascript">
  $(function(){
    var $container = $('#container');
    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector: '.box',
        columnWidth: 251,
        gutterWidth:0,
      });
    });

    $container.infinitescroll({
      navSelector  : '#page-nav',
      nextSelector : '#page-nav a',
      itemSelector : '.box',
      loading: {
          finishedMsg: 'NULL',
        }
      },
      function( newElements ) {
        var $newElems = $( newElements );
        $newElems.imagesLoaded(function(){
          $container.masonry( 'appended', $newElems, true );
        });
      }
    );
  });
</script>
</head>
<body>
<nav id="page-nav">
 <a href="?page=3"></a>
</nav>
<div id="container" class="transitions-enabled infinite-scroll clearfix">
{% if filename_list %}
        {% set colnum = 1 %}
    {% for filename in filename_list %}
        {% set colnum = colnum + 1 %}
        <div class="box">
        <a href="/view/{{ filename }}.jpg"><img src="/view/{{ filename }}.jpg?_re=200x300"/></a><p>
        </div>
    {% end %}
{% end %}
</div>
</body>
</html>
